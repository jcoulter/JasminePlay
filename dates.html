<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>Date Prototype</title>

    <link rel="shortcut icon" type="image/png" href="lib/jasmine-2.1.3/jasmine_favicon.png">
    <link rel="stylesheet" href="lib/jasmine-2.1.3/jasmine.css">

    <script src="src/DateUtil.js"></script>
    <script src="src/HtmlUtil.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.10.3/jquery-ui.js"></script>
</head>
<body>

<div id="buildyourform">
    <legend>Build your own form!</legend>
</div>

<input type="button" value="Add a field" class="add" id="add"/>
<input type="button" value="Sort" class="sort" id="sort"/>


<script type="text/javascript">
    $(document).ready(function () {
        $("#add").click(function () {
            var intId = $("#buildyourform div").length;
            var fieldWrapper = $("<div class=\"fieldwrapper\" id=\"field" + intId + "\"/>");
            var removeButton = $("<input type=\"button\" class=\"remove\" value=\"-\" />");
            removeButton.click(function () {
                $(this).parent().remove();
            });

            var startDateId = "startDate" + intId
            fieldWrapper.append($("<label for=\"" + startDateId + "\">Start Date:</label>"));
            fieldWrapper.append($("<input type=\"text\" class=\"fieldname\" name=\"startDate\" id=\"" + startDateId + "\" />"));

            var endDateId = "endDate" + intId
            fieldWrapper.append($("<label for=\"" + endDateId + "\">End Date:</label>"));
            fieldWrapper.append($("<input type=\"text\" class=\"fieldname\" name=\"endDate\" id=\"" + endDateId + "\" />"));

            fieldWrapper.append(removeButton);
            $("#buildyourform").append(fieldWrapper);
        });
        $("#sort").click(function () {
            var container = $("#buildyourform");
            var divList = $(".fieldwrapper");
            var sorted = divList.sort(function (a, b) {
                var a_startDate = $(a).children("[name=\"startDate\"]")[0].value;
                var b_startDate = $(b).children("[name=\"startDate\"]")[0].value;
                var result = a_startDate - b_startDate;
                return result;
            });
            $.each(sorted, function (idx, itm) {
                changeIndexTo($(itm), idx)
                container.append(itm);
            })
        });
    });

</script>

</body>
</html>
